<form [formGroup]="produitForm" (ngSubmit)="onSubmit()" class="form-container">

  <div>
      <img [src]="produit.imageUrl" alt="">
  </div>

  <div>
    <h3>Nom du produit : {{produit.nom}}</h3>
    <h3>Prix : {{produit.prix | currency:'EUR'}}</h3>
    <p>Description: {{produit.description}}</p>
  </div>
 
  <div >
    <div class="form-group">
      <div class="form-field">
        <label for="quantite">Quantite</label>
        <input id="quantite" formControlName="quantite" type="number" min="1" step="1" />

        @if (produitForm.get('quantite')?.errors?.['required']) {
          <span class="error-message">La quantité est obligatoire</span>
        }
        @if (produitForm.get('quantite')?.errors?.['min']) {
          <span class="error-message">La quantité doit être au moins 1</span>
        }
        @if (produitForm.get('quantite')?.errors?.['notInteger']) {
          <span class="error-message">La quantité doit être un entier</span>
        }
      </div>

      <!-- gere la taille -->
      <div class="radio-group-taille" formGroupName="taille">
        <label>Taille :</label>

        @for (tailleOption of produit.taille; track $index) {
          <div class="radio-option">
            <input 
              type="radio" 
              [id]="'taille-' + $index" 
              formControlName="taille" 
              [value]="tailleOption"
              required 
            />
            <label [for]="'taille-' + $index">{{tailleOption}}</label>
          </div>
        }

        @if (produitForm.get('taille')?.invalid && produitForm.get('taille')?.touched) {
          <small style="color: red;">Veuillez sélectionner une taille.</small>
        }
      </div>

      <!-- gere la couleur -->
      <div class="radio-group-couleur" formGroupName="couleur">
        <label>Couleur :</label>
        @for (couleurOption of produit.couleur; track $index) {
          <div class="radio-option">
            <input 
              type="radio" 
              [id]="'couleur-' + $index" 
              formControlName="couleur" 
              [value]="couleurOption"
              required 
            />
            <label [for]="'couleur-' + $index">{{couleurOption}}</label>
          </div>
        }
        @if (produitForm.get('couleur')?.invalid && produitForm.get('couleur')?.touched) {
          <small style="color: red;">Veuillez sélectionner une couleur.</small>
        }
      </div>

    </div>  
  </div>

  <div>
    <h3>Prix total : {{prixTotal}}</h3>
  </div>


  <button type="submit" class="btn" [disabled]="produitForm.invalid">Ajouter au pannier</button>

</form>
