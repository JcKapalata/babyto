<div class="register-container">
  <div class="register-card">
    <h2>Créer un compte</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      
      <div class="form-group">
        <label>Nom d'utilisateur</label>
        <input type="text" formControlName="nom" placeholder="Ex: Jean">
        @if (registerForm.get('nom')?.touched && registerForm.get('nom')?.invalid) {
            <small>Le nom est requis (min 4 caractères).</small>
        }
      </div>

      <div class="form-group">
        <label>Prenom d'utilisateur</label>
        <input type="text" formControlName="prenom" placeholder="Ex: Dupont">
        @if (registerForm.get('prenom')?.touched && registerForm.get('prenom')?.invalid) {
            <small>Le prénom est requis (min 4 caractères).</small>
        }
      </div>


      <div class="form-group">
        <label>Email</label>
        <input type="email" formControlName="email" placeholder="votre@email.com">
        @if (registerForm.get('email')?.touched && registerForm.get('email')?.invalid) {
            <small>Veuillez entrer un email valide.</small>
        }
      </div>

      <div class="form-group">
        <label>Numero</label>
        <input type="tel" formControlName="numero" placeholder="+1234567890">
        @if (registerForm.get('numero')?.touched && registerForm.get('numero')?.invalid) {
            <small>Veuillez entrer un numero valide.</small>
        }
      </div>

      <div class="form-group">
        <label>Mot de passe</label>

        <div class="input-wrapper">
          <input 
            [type]="hidePassword ? 'password' : 'text'" 
            formControlName="password" 
            placeholder="********">
          
          <button 
            type="button" 
            class="toggle-password" 
            (click)="hidePassword = !hidePassword">
            <span class="material-icons">
              {{ hidePassword ? 'visibility_off' : 'visibility' }}
            </span>
          </button>
        </div>
  
        @if (registerForm.get('password')?.touched && registerForm.get('password')?.invalid) {
            <small>Minimum 6 caractères.</small>
        }
      </div>

      <div class="form-group">
        <label>Confirmer le mot de passe</label>

        <div class="input-wrapper">
          <input 
            [type]="hideConfirmPassword ? 'password' : 'text'" 
            formControlName="confirmPassword" 
            placeholder="********">
          
          <button 
            type="button" 
            class="toggle-password" 
            (click)="hideConfirmPassword = !hideConfirmPassword">
            <span class="material-icons">
              {{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}
            </span>
          </button>
        </div>

        @if (registerForm.hasError('mismatch') && registerForm.get('confirmPassword')?.touched) {
            <small >Les mots de passe ne correspondent pas.</small>
        }    
      </div>

      <button type="submit" [disabled]="registerForm.invalid">S'inscrire</button>
    </form>
  </div>
</div>